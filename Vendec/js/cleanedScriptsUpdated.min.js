
document.addEventListener("DOMContentLoaded", (function() {
    let burger = document.getElementById("burger");
    let overlay = document.querySelector("section");
    let showMenu = false;
    
    overlay.style.display = "none";

    $('.testimonials-carousel').slick({
        dots: true,
        infinite: true,
        speed: 300,
        slidesToShow: 1,
      });

    burger.addEventListener("click", (e => {
        showMenu = !showMenu;
        if (showMenu) {
            burger.classList.add("active");
            overlay.style.display = "block";
            gsap.to(overlay, .65, {
                clipPath: "polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)",
                ease: "expo.in"
            })
        } else {
            burger.classList.remove("active");
            gsap.to(overlay, .65, {
                clipPath: "polygon(100% 0%, 100% 0%, 100% 100%, 100% 100%)",
                ease: "expo.out",
                onComplete: () => overlay.style.display = "none"
            })
        }
    }));
    
    const recentDiv = document.querySelector(".recent");
    if (recentDiv) {
        const showRecentDiv = () => {
            const rect = recentDiv.getBoundingClientRect();
            const windowHeight = window.innerHeight || document.documentElement.clientHeight;
            const triggerPosition = 100;
            if (rect.top <= windowHeight - triggerPosition) {
                recentDiv.classList.add("visible");
            } else {
                recentDiv.classList.remove("visible");
            }
        };
        window.addEventListener("scroll", showRecentDiv);
    }
    
    const projektyLink = document.getElementById("projekty-link");
    const sublinks = document.querySelector(".sublinks");
    projektyLink.addEventListener("click", (function(event) {
        event.preventDefault();
        sublinks.classList.toggle("open");
    }));
}));
